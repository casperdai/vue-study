使用src/core/observer下的watcher.js与dep.js进行订阅和更新（观察者模式）

- 对象劫持代理setter和getter
- 数组劫持代理push、pop、shift、unshift、splice、sort、reverse（直接操作数组无法动态响应的原因是无法劫持代理）

##### Watcher

- lazy模式：用于计算属性，更新时只是设置标识位dirty，被引用时才进行计算
- sync模式：立即响应
- 其他：发生变化后进入等待队列，下一个loop进行更新

##### Dep

收集与更新Watcher

##### 收集与发布过程

1. 数据obj通过observe进行劫持代理
2. 一个依赖obj的Watcher（getter中使用了obj），初始化时调用get方法（计算属性在被使用时触发）
3. Watcher将自身入栈（pushTarget）并调用创建时传入的getter
4. obj在getter中调用Dep的depend收集栈顶的Watcher
5. Watcher将自身出栈（popTarget）
7. obj调用setter时若值发生变化，则Dep调用收集的Watcher的update方法进行更新

##### 流程

```
收集
watcher.get -> Dep.target = watcher -> prop getter -> dep.depend -> Dep.target.addDep -> watcher保存dep -> dep.addSub -> dep保存watcher -> Dep.target = null

响应
prop setter -> dep.notify -> watcher.update -> watcher.get
```

每次收集时watcher都会维护一个新Dep数组，收集后与现有数组进行对比，保存交集取消旧数组不存在于新数组的dep的关联